<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OUTFIT MATCH | Perfil</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>

  <body>
    <div class="container">
      <div class="nav">
        <div class="brand">
          <span>OUTFIT MATCH</span>
          <span class="badge">Perfil</span>
        </div>
        <div class="links">
          <a class="btn small" href="results.html">Resultados</a>
          <a class="btn small" href="catalog.html">Catálogo</a>
          <button class="btn small danger" onclick="logout()">Salir</button>
        </div>
      </div>

      <!-- ✅ SOLO UNA CARD (sin panel derecho) -->
      <div class="grid">
        <div class="card main max" style="grid-column: 1 / -1;">
          <h1>Asistente de estilo (2–3 min)</h1>
          <p class="muted">
            Completa el perfil del cliente para detectar su tipo de cuerpo y sugerir cortes + colores.
          </p>

          <div class="progress" style="margin: 12px 0">
            <div id="bar"></div>
          </div>

          <div id="msg"></div>

          <!-- PASO 1 -->
          <section class="step" data-step="1">
            <h2>1) Datos y medidas</h2>
            <p class="muted">
              Primero registra nombre y rango de edad. Luego ingresamos medidas aproximadas en cm.
            </p>

            <div class="form">
              <div class="row">
                <div class="field">
                  <label>Nombres y apellidos</label>
                  <input
                    class="input"
                    id="nombresApellidos"
                    type="text"
                    placeholder="Ej: Alison Alanuca"
                    required
                  />
                </div>

                <div class="field">
                  <label>Rango de edad</label>
                  <select id="rangoEdad" class="input">
                    <option value="">Selecciona</option>
                    <option value="15-20">15–20</option>
                    <option value="21-30">21–30</option>
                    <option value="31-40">31–40</option>
                    <option value="40+">40+</option>
                  </select>
                </div>
              </div>

              <div class="hr"></div>

              <div class="row">
                <div class="field">
                  <label>Estatura (cm)</label>
                  <input
                    class="input"
                    id="estaturaCm"
                    type="number"
                    min="100"
                    max="230"
                    placeholder="Ej: 165"
                  />
                </div>
                <div class="field">
                  <label>Hombros (cm)</label>
                  <input
                    class="input"
                    id="hombrosCm"
                    type="number"
                    step="0.1"
                    placeholder="Ej: 42.5"
                  />
                </div>
              </div>

              <div class="row">
                <div class="field">
                  <label>Pecho/Busto (cm)</label>
                  <input
                    class="input"
                    id="pechoCm"
                    type="number"
                    step="0.1"
                    placeholder="Ej: 90"
                  />
                </div>
                <div class="field">
                  <label>Cintura (cm)</label>
                  <input
                    class="input"
                    id="cinturaCm"
                    type="number"
                    step="0.1"
                    placeholder="Ej: 70"
                  />
                </div>
              </div>

              <div class="row">
                <div class="field">
                  <label>Cadera (cm)</label>
                  <input
                    class="input"
                    id="caderaCm"
                    type="number"
                    step="0.1"
                    placeholder="Ej: 98"
                  />
                </div>
                <div class="field">
                  <label>Objetivo (opcional)</label>
                  <select id="objetivo" class="input">
                    <option value="">Selecciona</option>
                    <option value="diario">Día a día</option>
                    <option value="oficina">Oficina</option>
                    <option value="cita">Cita</option>
                    <option value="fiesta">Fiesta</option>
                    <option value="entrevista">Entrevista</option>
                  </select>
                </div>
              </div>
            </div>
          </section>

          <!-- PASO 2 -->
          <section class="step" data-step="2" style="display: none">
            <h2>2) Colorimetría</h2>
            <p class="muted">
              Esto hace que las recomendaciones de colores se sientan “hechas para ti”.
            </p>

            <div class="form">
              <div class="row">
                <div class="field">
                  <label>Tono de piel</label>

                  <!-- Select personalizado -->
                  <div class="selectbox" id="tonoPielBox">
                    <button class="select-btn" type="button" id="tonoPielBtn">
                      <span id="tonoPielLabel">Selecciona...</span>
                      <span class="chev">▼</span>
                    </button>

                    <div class="menu" id="tonoPielMenu">
                      <div class="option" data-value="clara" data-color="#f5d7c5">
                        <span class="swatch" style="background:#f5d7c5"></span>
                        <span class="label">Clara</span>
                        <span class="sub">Referencia</span>
                      </div>
                      <div class="option" data-value="media" data-color="#e3b38f">
                        <span class="swatch" style="background:#e3b38f"></span>
                        <span class="label">Media</span>
                        <span class="sub">Referencia</span>
                      </div>
                      <div class="option" data-value="morena" data-color="#c58b5a">
                        <span class="swatch" style="background:#c58b5a"></span>
                        <span class="label">Morena</span>
                        <span class="sub">Referencia</span>
                      </div>
                      <div class="option" data-value="oscura" data-color="#7a4a2b">
                        <span class="swatch" style="background:#7a4a2b"></span>
                        <span class="label">Oscura</span>
                        <span class="sub">Referencia</span>
                      </div>
                    </div>

                    <input type="hidden" id="tonoPiel" value="" />
                  </div>
                </div>

                <div class="field">
                  <label>Colores favoritos (coma)</label>
                  <input
                    id="coloresFavoritos"
                    class="input"
                    placeholder="Ej: negro, blanco, beige"
                  />
                </div>
              </div>

              <div class="row">
                <div class="field">
                  <label>Color de ojos (opcional)</label>
                  <input id="colorOjos" class="input" placeholder="Ej: café, miel, verde" />
                </div>

                <div class="field">
                  <label>Color de cabello (opcional)</label>
                  <input id="colorCabello" class="input" placeholder="Ej: negro, castaño, rubio" />
                </div>
              </div>
            </div>
          </section>

          <!-- PASO 3 (NUEVO) FOTO -->
          <section class="step" data-step="3" style="display: none">
            <h2>3) Foto (opcional) para probador virtual</h2>
            <p class="muted">
              Toma una foto rápida para poder “probar” prendas del catálogo (MVP).
            </p>

            <div class="form">
              <div class="row">
                <div class="field">
                  <label>Cámara</label>
                  <video
                    id="cam"
                    class="input"
                    autoplay
                    playsinline
                    style="height: 240px; padding: 0;"
                  ></video>

                  <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
                    <button class="btn" type="button" id="startCamBtn">Activar cámara</button>
                    <button class="btn primary" type="button" id="snapBtn">Tomar foto</button>
                    <button class="btn danger" type="button" id="stopCamBtn">Detener</button>
                  </div>
                </div>

                <div class="field">
                  <label>Vista previa</label>
                  <canvas id="shot" class="input" style="height:240px; padding:0;"></canvas>
                  <p class="muted" style="font-size:13px; margin-top:10px;">
                    Si no quieres guardar foto, puedes continuar igual.
                  </p>
                </div>
              </div>

              <input type="hidden" id="fotoBase64" value="" />
            </div>
          </section>

          <!-- PASO 4 -->
          <section class="step" data-step="4" style="display: none">
            <h2>4) Listo</h2>
            <p class="muted">
              Guardaremos el perfil y te llevamos a los resultados.
            </p>

            <div class="card" style="padding:14px;">
              <div class="muted" style="font-size:13px">Resumen rápido:</div>
              <div id="summary" style="margin-top:8px"></div>
            </div>
          </section>

          <div class="hr"></div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" id="prevBtn" type="button">Atrás</button>
            <button class="btn primary" id="nextBtn" type="button">Siguiente</button>
            <button class="btn primary" id="saveBtn" type="button" style="display:none;">
              Guardar y ver resultados
            </button>
          </div>
        </div>
      </div>

      <div class="footer">© OUTFIT MATCH</div>
    </div>

    <script src="assets/js/api.js"></script>
    <script src="assets/js/wizard.js"></script>
  </body>
</html>
